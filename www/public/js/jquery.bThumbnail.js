(function(b){b.fn.extend({bThumbnail:function(a){a=b.extend(b.fn.bThumbnail.defaults,a);this.each(function(){var i=b(this),f=new Image,g=a.width,h=a.height,d=a.unit;b(this).wrap('<div class="'+a.appendclass+'"></div>');f.onload=function(){var e=f.width,c=f.height;b.isFunction(a.position)?(e={width:g,height:h,oWidth:e,oHeight:c},c=a.position(e)):c=a.position;e=c.x;c=c.y;i.parent("div."+a.appendclass).css({position:"relative",height:h+d,width:g+d});i.css({position:"absolute",top:-1*c+d,left:-1*e+d,
clip:"rect("+c+d+" "+(e+g)+d+" "+(c+h)+d+" "+e+d+")"}).trigger("postRender")};f.src=b(this).attr("src")})}});b.fn.bThumbnail.position={random:function(a){return{x:a.oWidth>a.width?Math.ceil(Math.random()*(a.oWidth-a.width)):(a.oWidth-a.width)/2,y:a.oHeight>a.height?Math.ceil(Math.random()*(a.oHeight-a.height)):(a.oHeight-a.height)/2}},center:function(a){return{x:(a.oWidth-a.width)/2,y:(a.oHeight-a.height)/2}}};b.fn.bThumbnail.defaults={width:100,height:100,unit:"px",appendclass:"b-thumbnails",position:b.fn.bThumbnail.position.center}})(jQuery);
